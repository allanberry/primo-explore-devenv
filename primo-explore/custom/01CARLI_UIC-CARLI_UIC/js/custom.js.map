{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/main.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/browzine.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/libchat.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/mainmenu.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/stackmap.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","mainmenu","libchat","stackmap","browzine","app","angular","init","removeTargetAttrs","appendJournalsCard","primoIntegration","component","bindings","parentCtrl","controller","this","isCollapsed","new_card","document","createElement","placeCard","existing_card","querySelectorAll","window","location","href","match","parentElement","append","className","innerHTML","observer","MutationObserver","mutations","me","disconnect","loc","setInterval","observe","childList","subtree","libraryId","apiKey","w","type","async","src","body","appendChild","$scope","primo","searchResult","chatID","chat_element","protocol","chat_script","setAttribute","remove","menulinks","forEach","link","removeAttribute","attr","getAttribute","replace","getElementById","attributes","querySelector","css1","rel","crossorigin","css2"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\"use strict\";\n\nconst mainmenu = require(\"./uic_modules/mainmenu\");\nconst libchat = require(\"./uic_modules/libchat\");\nconst stackmap = require(\"./uic_modules/stackmap\");\nconst browzine = require(\"./uic_modules/browzine\");\n\nconst app = angular.module(\"viewCustom\", [\"angularLoad\"]);\n\nlibchat.init();\nstackmap.init();\n\nmainmenu.removeTargetAttrs();\nbrowzine.appendJournalsCard();\nbrowzine.primoIntegration(app);\n\n// app.component(\"myInstitutionComponent\", {\n//   template: `<span style=\"margin-left: 40%;\">Hello World</span>`,\n// });\n\n// app.component(\"prmSearchBarAfter\", {\n//   bindings: { parentCtrl: `<` },\n//   template: `<my-institution-component></my-institution-component>`,\n// });\n\n/**\n * Collapse \"get it from other institutions\" dropdown in full record\n */\napp.component(\"prmAlmaOtherMembersAfter\", {\n  bindings: {\n    parentCtrl: \"<\",\n  },\n  controller: [\n    function () {\n      var ctrl = this;\n      ctrl.parentCtrl.isCollapsed = true;\n    },\n  ],\n});","// const browzinePrimoAdapter = require(\"./browzine-primo-adapter\");\n\nfunction appendJournalsCard() {\n  var new_card = document.createElement(\"md-card\");\n\n  new_card.className = \"default-card\";\n  new_card.innerHTML = `\n  <md-card-title>\n    <md-card-title-text>\n      <span class=\"md-headline\">Browzine</span>\n    </md-card-title-text>\n  </md-card-title>\n  <md-card-content>\n    <p><a href=\"https://browzine.com/libraries/81\">Browzine</a> lets you flip through and read UIC Library-subscribed Journals, equivalent to browsing through physical Library stacks.</p>\n  </md-card-content>\n  <md-card-footer layout=\"row\" style=\"text-align: right\">\n    <a class=\"uic_button md-button md-accent md-raised\" href=\"https://browzine.com/libraries/81\">Visit Browzine</a></a>\n  </md-card-footer>`;\n\n  function placeCard() {\n    const existing_card = document.querySelectorAll(\"md-card\")[0];\n    if (window.location.href.match(\"jsearch\")) {\n      if (existing_card) {\n        existing_card.parentElement.append(new_card);\n      }\n    }\n  }\n\n  // initial appearance on direct load\n  const observer = new MutationObserver(function (mutations, me) {\n    const existing_card = document.querySelectorAll(\"md-card\")[0];\n    if (existing_card) {\n      placeCard();\n      me.disconnect(); // stop observing\n    }\n  });\n\n  // subsequent appearances after navigation\n  let loc = window.location.href;\n  setInterval(function () {\n    if (loc != window.location.href) {\n      placeCard();\n      loc = window.location.href;\n    }\n  }, 100); // check every 100ms\n\n  observer.observe(document, {\n    childList: true,\n    subtree: true,\n  });\n}\n\n/**\n * adapted from https://thirdiron.atlassian.net/wiki/spaces/BrowZineAPIDocs/pages/79200260/Ex+Libris+Primo+Integration\n */\nfunction primoIntegration(app) {\n  // Load BrowZine Adapter\n  window.browzine = {\n    libraryId: \"81\",\n    apiKey: \"xxx\",\n  };\n\n\n\n  var w = document.createElement(\"script\");\n  w.type = \"text/javascript\";\n  w.async = true;\n  w.src = \"https://s3.amazonaws.com/browzine-adapters/primo/browzine-primo-adapter.js\";\n  var b = document.body;\n  b.appendChild(w);\n\n  app.controller('prmSearchResultAvailabilityLineAfterController', function($scope) {\n    window.browzine.primo.searchResult($scope);\n  });\n\n  app.component('prmSearchResultAvailabilityLineAfter', {\n    bindings: { parentCtrl: '<' },\n    controller: 'prmSearchResultAvailabilityLineAfterController'\n  });\n\n}\n\nmodule.exports = {\n  appendJournalsCard,\n  primoIntegration,\n};\n","function init() {\n  const chatID = \"325a3faf25b8f6445806d60e21bcc210\";\n  const chat_element = document.createElement(\"div\");\n  const protocol = document.location.protocol ? \"https://\" : \"http://\";\n  const chat_script = document.createElement(\"script\");\n\n  document.body.appendChild(chat_element);\n  chat_element.setAttribute(\"id\", `libchat_${chatID}`);\n  chat_script.setAttribute(\"type\", \"text/javascript\");\n  chat_script.setAttribute(\"async\", \"true\");\n  chat_script.setAttribute(\n    \"src\",\n    `${protocol}v2.libanswers.com/load_chat.php?hash=${chatID}`\n  );\n  document.body.appendChild(chat_script);\n}\n\nmodule.exports = {\n  init\n};\n","/**\n * Remove \"target\" attributes in Main Menu anchor links\n * forcing pages to load in current tab\n */\nfunction removeTargetAttrs() {\n  const targetNode = document.getElementById(\"some-id\");\n\n  function remove() {\n    const menulinks = document.querySelectorAll(\"prm-main-menu a\");\n    if (menulinks) {\n      menulinks.forEach((link) => {\n        // kill all \"target\" attributes in the main menu\n        link.removeAttribute(\"target\");\n\n        // remove now-false Aria label\n        const attr = \"aria-label\";\n        const match = \", opens in a new window\";\n        if (link.getAttribute(attr) && link.getAttribute(attr).match(match)) {\n          link.setAttribute(attr, link.getAttribute(attr).replace(match, \"\"));\n        }\n      });\n    }\n  }\n\n  remove();\n  const observer = new MutationObserver(function (mutations, me) {\n    remove();\n  });\n\n  observer.observe(document, {\n    attributes: true,\n    childList: true,\n    subtree: true,\n  });\n}\n\nmodule.exports = {\n  removeTargetAttrs\n};\n","function init() {\n  var a = document.querySelector(\"head\");\n  var css1 = document.createElement(\"link\");\n\n  css1.type = \"text/css\";\n  css1.rel = \"Stylesheet\";\n  css1.href =\n    \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\";\n  css1.crossorigin = \"anonymous\";\n  a.appendChild(css1);\n\n  var css2 = document.createElement(\"link\");\n  css2.type = \"text/css\";\n  css2.rel = \"Stylesheet\";\n  css2.href =\n    \"https://www.stackmapintegration.com/uic-primove/StackMap.min.css\";\n  a.appendChild(css2);\n\n  var w = document.createElement(\"script\");\n  w.type = \"text/javascript\";\n  w.async = true;\n  w.src = \"https://www.stackmapintegration.com/uic-primove/StackMap.min.js\";\n  var b = document.body;\n  b.appendChild(w);\n}\n\nmodule.exports = {\n  init\n};\n"]}