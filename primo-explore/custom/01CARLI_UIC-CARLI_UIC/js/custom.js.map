{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/main.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/browzine-primo-adapter.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/browzine.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/libchat.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/mainmenu.js","primo-explore/custom/01CARLI_UIC-CARLI_UIC/js/uic_modules/stackmap.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","mainmenu","libchat","stackmap","browzine","app","angular","init","removeTargetAttrs","appendJournalsCard","primoIntegration","component","bindings","parentCtrl","controller","this","isCollapsed","libraryId","api","libraryIdOverride","urlRewrite","apiKey","url","indexOf","replace","override","getResult","scope","result","item","isArticle","validation","pnx","display","type","trim","toLowerCase","isJournal","getIssn","issn","addata","filter","test","join","eissn","encodeURIComponent","getDoi","doi","getEndpoint","endpoint","getUnpaywallEndpoint","email","unpaywallEmailAddressKey","getData","response","Array","isArray","data","journal","browzineEnabled","pop","getIncludedJournal","included","getBrowZineWebLink","browzineWebLink","getCoverImageUrl","coverImageUrl","getBrowZineEnabled","isDefaultCoverImage","defaultCoverImage","getDirectToPDFUrl","directToPDFUrl","fullTextFile","getArticleLinkUrl","articleLinkUrl","contentLocation","isTrustedRepository","best_oa_location","url_for_pdf","isUnknownVersion","version","getUnpaywallArticlePDFUrl","host_type","getUnpaywallArticleLinkUrl","url_for_landing_page","getUnpaywallManuscriptArticlePDFUrl","getUnpaywallManuscriptArticleLinkUrl","showJournalCoverImages","featureEnabled","config","journalCoverImagesEnabled","showJournalBrowZineWebLinkText","journalBrowZineWebLinkTextEnabled","showArticleBrowZineWebLinkText","articleBrowZineWebLinkTextEnabled","showDirectToPDFLink","articlePDFDownloadLinkEnabled","prefixConfig","primoArticlePDFDownloadLinkEnabled","showArticleLink","articleLinkEnabled","showPrintRecords","printRecordsIntegrationEnabled","isFiltered","delivery","deliveryCategory","directToPDFTemplate","articlePDFDownloadLinkText","primoArticlePDFDownloadLinkText","template","articleLinkTemplate","articleLinkText","browzineWebLinkTemplate","browzineWebLinkText","journalBrowZineWebLinkText","primoJournalBrowZineWebLinkText","articleBrowZineWebLinkText","primoArticleBrowZineWebLinkText","unpaywallArticlePDFTemplate","articlePDFDownloadViaUnpaywallText","unpaywallArticleLinkTemplate","articleLinkViaUnpaywallText","unpaywallManuscriptPDFTemplate","articleAcceptedManuscriptPDFViaUnpaywallText","unpaywallManuscriptLinkTemplate","articleAcceptedManuscriptArticleLinkViaUnpaywallText","isUnpaywallEnabled","articlePDFDownloadViaUnpaywallEnabled","articleLinkViaUnpaywallEnabled","articleAcceptedManuscriptPDFViaUnpaywallEnabled","articleAcceptedManuscriptArticleLinkViaUnpaywallEnabled","getElement","$element","getElementParent","element","offsetParent","getScope","$scope","$ctrl","undefined","shouldEnhance","searchResult","request","XMLHttpRequest","open","setRequestHeader","onload","requestUnpaywall","readyState","DONE","status","JSON","parse","poll","availabilityLine","querySelector","insertAdjacentHTML","requestAnimationFrame","append","coverImages","querySelectorAll","className","prototype","forEach","coverImage","src","unpaywallArticlePDFUrl","unpaywallArticleLinkUrl","unpaywallManuscriptArticlePDFUrl","unpaywallManuscriptArticleLinkUrl","send","transition","event","anchor","preventDefault","stopPropagation","window","href","target","browzinePrimoAdapter","new_card","document","createElement","placeCard","existing_card","location","match","parentElement","innerHTML","observer","MutationObserver","mutations","me","disconnect","loc","setInterval","observe","childList","subtree","console","log","chatID","chat_element","protocol","chat_script","body","appendChild","setAttribute","remove","menulinks","link","removeAttribute","attr","getAttribute","getElementById","attributes","css1","rel","crossorigin","css2","w","async"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\"use strict\";\n\nconst mainmenu = require(\"./uic_modules/mainmenu\");\nconst libchat = require(\"./uic_modules/libchat\");\nconst stackmap = require(\"./uic_modules/stackmap\");\nconst browzine = require(\"./uic_modules/browzine\");\n\nconst app = angular.module(\"viewCustom\", [\"angularLoad\"]);\n\nlibchat.init();\nstackmap.init();\n\nmainmenu.removeTargetAttrs();\nbrowzine.appendJournalsCard();\nbrowzine.primoIntegration(app);\n\n// app.component(\"myInstitutionComponent\", {\n//   template: `<span style=\"margin-left: 40%;\">Hello World</span>`,\n// });\n\n// app.component(\"prmSearchBarAfter\", {\n//   bindings: { parentCtrl: `<` },\n//   template: `<my-institution-component></my-institution-component>`,\n// });\n\n/**\n * Collapse \"get it from other institutions\" dropdown in full record\n */\napp.component(\"prmAlmaOtherMembersAfter\", {\n  bindings: {\n    parentCtrl: \"<\",\n  },\n  controller: [\n    function () {\n      var ctrl = this;\n      ctrl.parentCtrl.isCollapsed = true;\n    },\n  ],\n});","// the following code was taken from here:\n// https://s3.amazonaws.com/browzine-adapters/primo/browzine-primo-adapter.js\n// It has been modified\n\nmodule.exports = function (browzine) {\n  var libraryId = browzine.libraryId;\n  var api = libraryIdOverride(urlRewrite(browzine.api));\n  var apiKey = browzine.apiKey;\n\n  function urlRewrite(url) {\n    if (!url) {\n      return;\n    }\n\n    return url.indexOf(\"public-api.thirdiron.com\") > -1\n      ? url\n      : url.replace(\"api.thirdiron.com\", \"public-api.thirdiron.com\");\n  }\n\n  function libraryIdOverride(url) {\n    var override = url;\n    var libraryId = browzine.libraryId;\n\n    if (libraryId) {\n      var baseUrl =\n        \"https://public-api.thirdiron.com/public/v1/libraries/{libraryId}\";\n      override = baseUrl.replace(/{libraryId}/g, libraryId);\n    }\n\n    return override;\n  }\n\n  function getResult(scope) {\n    return scope.result || scope.item;\n  }\n\n  function isArticle(scope) {\n    var validation = false;\n    var result = getResult(scope);\n\n    if (result && result.pnx) {\n      if (result.pnx.display && result.pnx.display.type) {\n        var contentType = result.pnx.display.type[0].trim().toLowerCase();\n\n        if (contentType.indexOf(\"article\") > -1) {\n          validation = true;\n        }\n      }\n    }\n\n    return validation;\n  }\n\n  function isJournal(scope) {\n    var validation = false;\n    var result = getResult(scope);\n\n    if (result && result.pnx) {\n      if (result.pnx.display && result.pnx.display.type) {\n        var contentType = result.pnx.display.type[0].trim().toLowerCase();\n\n        if (contentType.indexOf(\"journal\") > -1) {\n          validation = true;\n        }\n      }\n    }\n\n    return validation;\n  }\n\n  function getIssn(scope) {\n    var issn = \"\";\n    var result = getResult(scope);\n\n    if (result && result.pnx && result.pnx.addata) {\n      if (result.pnx.addata.issn) {\n        if (result.pnx.addata.issn.length > 1) {\n          issn = result.pnx.addata.issn\n            .filter(function (issn) {\n              return issn.length < 10 && /[\\S]{4}\\-[\\S]{4}/.test(issn);\n            })\n            .join(\",\")\n            .trim()\n            .replace(/-/g, \"\");\n        } else {\n          if (result.pnx.addata.issn[0]) {\n            issn = result.pnx.addata.issn[0].trim().replace(\"-\", \"\");\n          }\n        }\n      }\n\n      if (result.pnx.addata.eissn && !issn) {\n        if (result.pnx.addata.eissn.length > 1) {\n          issn = result.pnx.addata.eissn\n            .filter(function (issn) {\n              return issn.length < 10 && /[\\S]{4}\\-[\\S]{4}/.test(issn);\n            })\n            .join(\",\")\n            .trim()\n            .replace(/-/g, \"\");\n        } else {\n          if (result.pnx.addata.eissn[0]) {\n            issn = result.pnx.addata.eissn[0].trim().replace(\"-\", \"\");\n          }\n        }\n      }\n    }\n\n    return encodeURIComponent(issn);\n  }\n\n  function getDoi(scope) {\n    var doi = \"\";\n    var result = getResult(scope);\n\n    if (result && result.pnx) {\n      if (result.pnx.addata && result.pnx.addata.doi) {\n        if (result.pnx.addata.doi[0]) {\n          doi = result.pnx.addata.doi[0].trim();\n        }\n      }\n    }\n\n    return encodeURIComponent(doi);\n  }\n\n  function getEndpoint(scope) {\n    var endpoint = \"\";\n\n    if (isJournal(scope) && getIssn(scope)) {\n      var issn = getIssn(scope);\n      endpoint = api + \"/search?issns=\" + issn;\n    }\n\n    if (isArticle(scope) && getDoi(scope)) {\n      var doi = getDoi(scope);\n      endpoint = api + \"/articles/doi/\" + doi + \"?include=journal\";\n    }\n\n    if (isArticle(scope) && !getDoi(scope) && getIssn(scope)) {\n      var issn = getIssn(scope);\n      endpoint = api + \"/search?issns=\" + issn;\n    }\n\n    endpoint += \"&access_token=\" + apiKey;\n\n    return endpoint;\n  }\n\n  function getUnpaywallEndpoint(scope) {\n    var endpoint;\n    var email = browzine.unpaywallEmailAddressKey;\n\n    if (isArticle(scope) && getDoi(scope) && email) {\n      var doi = getDoi(scope);\n      endpoint = \"https://api.unpaywall.org/v2/\" + doi + \"?email=\" + email;\n    }\n\n    return endpoint;\n  }\n\n  function getData(response) {\n    var data = {};\n\n    if (Array.isArray(response.data)) {\n      data = response.data\n        .filter(function (journal) {\n          return journal.browzineEnabled === true;\n        })\n        .pop();\n    } else {\n      data = response.data;\n    }\n\n    return data;\n  }\n\n  function getIncludedJournal(response) {\n    var journal = null;\n\n    if (response.included) {\n      journal = Array.isArray(response.included)\n        ? response.included[0]\n        : response.included;\n    }\n\n    return journal;\n  }\n\n  function getBrowZineWebLink(data) {\n    var browzineWebLink = null;\n\n    if (data && data.browzineWebLink) {\n      browzineWebLink = data.browzineWebLink;\n    }\n\n    return browzineWebLink;\n  }\n\n  function getCoverImageUrl(scope, data, journal) {\n    var coverImageUrl = null;\n\n    if (isJournal(scope) && getIssn(scope)) {\n      if (data && data.coverImageUrl) {\n        coverImageUrl = data.coverImageUrl;\n      }\n    }\n\n    if (isArticle(scope) && getDoi(scope)) {\n      if (journal && journal.coverImageUrl) {\n        coverImageUrl = journal.coverImageUrl;\n      }\n    }\n\n    if (isArticle(scope) && !getDoi(scope) && getIssn(scope)) {\n      if (data && data.coverImageUrl) {\n        coverImageUrl = data.coverImageUrl;\n      }\n    }\n\n    return coverImageUrl;\n  }\n\n  function getBrowZineEnabled(scope, data, journal) {\n    var browzineEnabled = false;\n\n    if (isJournal(scope)) {\n      if (data && data.browzineEnabled) {\n        browzineEnabled = data.browzineEnabled;\n      }\n    }\n\n    if (isArticle(scope)) {\n      if (journal && journal.browzineEnabled) {\n        browzineEnabled = journal.browzineEnabled;\n      }\n    }\n\n    return browzineEnabled;\n  }\n\n  function isDefaultCoverImage(coverImageUrl) {\n    var defaultCoverImage = false;\n\n    if (coverImageUrl && coverImageUrl.toLowerCase().indexOf(\"default\") > -1) {\n      defaultCoverImage = true;\n    }\n\n    return defaultCoverImage;\n  }\n\n  function getDirectToPDFUrl(scope, data) {\n    var directToPDFUrl = null;\n\n    if (isArticle(scope)) {\n      if (data && data.fullTextFile) {\n        directToPDFUrl = data.fullTextFile;\n      }\n    }\n\n    return directToPDFUrl;\n  }\n\n  function getArticleLinkUrl(scope, data) {\n    var articleLinkUrl = null;\n\n    if (isArticle(scope)) {\n      if (data && data.contentLocation) {\n        articleLinkUrl = data.contentLocation;\n      }\n    }\n\n    return articleLinkUrl;\n  }\n\n  function isTrustedRepository(response) {\n    var validation = false;\n\n    if (response.best_oa_location && response.best_oa_location.url_for_pdf) {\n      if (\n        response.best_oa_location.url_for_pdf.indexOf(\"nih.gov\") > -1 ||\n        response.best_oa_location.url_for_pdf.indexOf(\"europepmc.org\") > -1\n      ) {\n        validation = true;\n      }\n    }\n\n    return validation;\n  }\n\n  function isUnknownVersion(response) {\n    var validation = false;\n\n    if (response.best_oa_location) {\n      if (\n        !response.best_oa_location.version ||\n        response.best_oa_location.version === \"\"\n      ) {\n        validation = true;\n      }\n    }\n\n    return validation;\n  }\n\n  function getUnpaywallArticlePDFUrl(response) {\n    var url;\n\n    if (response.best_oa_location) {\n      if (\n        response.best_oa_location.host_type === \"publisher\" ||\n        response.best_oa_location.host_type === \"repository\"\n      ) {\n        if (\n          response.best_oa_location.version === \"publishedVersion\" ||\n          (isUnknownVersion(response) && isTrustedRepository(response))\n        ) {\n          if (response.best_oa_location.url_for_pdf) {\n            url = response.best_oa_location.url_for_pdf;\n          }\n        }\n      }\n    }\n\n    return url;\n  }\n\n  function getUnpaywallArticleLinkUrl(response) {\n    var url;\n\n    if (response.best_oa_location) {\n      if (\n        response.best_oa_location.host_type === \"publisher\" ||\n        response.best_oa_location.host_type === \"repository\"\n      ) {\n        if (response.best_oa_location.version === \"publishedVersion\") {\n          if (!response.best_oa_location.url_for_pdf) {\n            url = response.best_oa_location.url_for_landing_page;\n          }\n        }\n      }\n    }\n\n    return url;\n  }\n\n  function getUnpaywallManuscriptArticlePDFUrl(response) {\n    var url;\n\n    if (response.best_oa_location) {\n      if (response.best_oa_location.host_type === \"repository\") {\n        if (\n          response.best_oa_location.version === \"acceptedVersion\" ||\n          (isUnknownVersion(response) && !isTrustedRepository(response))\n        ) {\n          if (response.best_oa_location.url_for_pdf) {\n            url = response.best_oa_location.url_for_pdf;\n          }\n        }\n      }\n    }\n\n    return url;\n  }\n\n  function getUnpaywallManuscriptArticleLinkUrl(response) {\n    var url;\n\n    if (response.best_oa_location) {\n      if (response.best_oa_location.host_type === \"repository\") {\n        if (response.best_oa_location.version === \"acceptedVersion\") {\n          if (!response.best_oa_location.url_for_pdf) {\n            url = response.best_oa_location.url_for_landing_page;\n          }\n        }\n      }\n    }\n\n    return url;\n  }\n\n  function showJournalCoverImages() {\n    var featureEnabled = false;\n    var config = browzine.journalCoverImagesEnabled;\n\n    if (typeof config === \"undefined\" || config === null || config === true) {\n      featureEnabled = true;\n    }\n\n    return featureEnabled;\n  }\n\n  function showJournalBrowZineWebLinkText() {\n    var featureEnabled = false;\n    var config = browzine.journalBrowZineWebLinkTextEnabled;\n\n    if (typeof config === \"undefined\" || config === null || config === true) {\n      featureEnabled = true;\n    }\n\n    return featureEnabled;\n  }\n\n  function showArticleBrowZineWebLinkText() {\n    var featureEnabled = false;\n    var config = browzine.articleBrowZineWebLinkTextEnabled;\n\n    if (typeof config === \"undefined\" || config === null || config === true) {\n      featureEnabled = true;\n    }\n\n    return featureEnabled;\n  }\n\n  function showDirectToPDFLink() {\n    var featureEnabled = false;\n    var config = browzine.articlePDFDownloadLinkEnabled;\n    var prefixConfig = browzine.primoArticlePDFDownloadLinkEnabled;\n\n    if (typeof config === \"undefined\" || config === null || config === true) {\n      featureEnabled = true;\n    }\n\n    if (\n      typeof prefixConfig !== \"undefined\" &&\n      prefixConfig !== null &&\n      prefixConfig === false\n    ) {\n      featureEnabled = false;\n    }\n\n    return featureEnabled;\n  }\n\n  function showArticleLink() {\n    var featureEnabled = false;\n    var config = browzine.articleLinkEnabled;\n\n    if (config === true) {\n      featureEnabled = true;\n    }\n\n    return featureEnabled;\n  }\n\n  function showPrintRecords() {\n    var featureEnabled = false;\n    var config = browzine.printRecordsIntegrationEnabled;\n\n    if (typeof config === \"undefined\" || config === null || config === true) {\n      featureEnabled = true;\n    }\n\n    return featureEnabled;\n  }\n\n  function isFiltered(scope) {\n    var validation = false;\n    var result = getResult(scope);\n\n    if (result && result.delivery) {\n      if (result.delivery.deliveryCategory) {\n        var deliveryCategory = result.delivery.deliveryCategory[0]\n          .trim()\n          .toLowerCase();\n\n        if (deliveryCategory === \"alma-p\" && !showPrintRecords()) {\n          validation = true;\n        }\n      }\n    }\n\n    return validation;\n  }\n\n  function transition(event, anchor) {\n    // Weâ€™ve seen some discovery services intercept basic a href links, and have\n    // been encouraged to intercept clicks more closely. We should continue\n    // intercepting clicks like this unless we hear feedback from discovery\n    // service vendors that this is no longer desired or necessary.\n    event.preventDefault();\n    event.stopPropagation();\n\n    window.open(anchor.href, anchor.target);\n\n    return false;\n  }\n\n  function directToPDFTemplate(directToPDFUrl) {\n    var pdfIcon =\n      \"https://assets.thirdiron.com/images/integrations/browzine-pdf-download-icon.svg\";\n    var articlePDFDownloadLinkText =\n      browzine.articlePDFDownloadLinkText ||\n      browzine.primoArticlePDFDownloadLinkText ||\n      \"Download PDF\";\n\n    var template =\n      \"<div class='browzine' style='line-height: 1.4em; margin-right: 4.5em;'>\" +\n      \"<a class='browzine-direct-to-pdf-link' href='{directToPDFUrl}' target='_blank' onclick='browzine.primo.transition(event, this)'>\" +\n      \"<img alt='BrowZine PDF Icon' src='{pdfIcon}' class='browzine-pdf-icon' style='margin-bottom: -3px; margin-right: 4.5px;' aria-hidden='true' width='12' height='16'/> \" +\n      \"<span class='browzine-web-link-text'>{articlePDFDownloadLinkText}</span> \" +\n      \"<md-icon md-svg-icon='primo-ui:open-in-new' class='md-primoExplore-theme' aria-hidden='true' style='height: 15px; width: 15px; min-height: 15px; min-width: 15px; margin-top: -2px;'><svg width='100%' height='100%' viewBox='0 0 24 24' y='504' xmlns='http://www.w3.org/2000/svg' fit='' preserveAspectRatio='xMidYMid meet' focusable='false'><path d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z'></path></svg></md-icon>\" +\n      \"</a>\" +\n      \"</div>\";\n\n    template = template.replace(/{directToPDFUrl}/g, directToPDFUrl);\n    template = template.replace(\n      /{articlePDFDownloadLinkText}/g,\n      articlePDFDownloadLinkText\n    );\n    template = template.replace(/{pdfIcon}/g, pdfIcon);\n\n    return template;\n  }\n\n  function articleLinkTemplate(articleLinkUrl) {\n    var linkIcon =\n      \"https://assets.thirdiron.com/images/integrations/browzine-article-link-icon.svg\";\n    var articleLinkText = browzine.articleLinkText || \"Read Article\";\n\n    var template =\n      \"<div class='browzine' style='line-height: 1.4em; margin-right: 4.5em;'>\" +\n      \"<a class='browzine-article-link' href='{articleLinkUrl}' target='_blank' onclick='browzine.primo.transition(event, this)'>\" +\n      \"<img alt='BrowZine Article Link Icon' src='{linkIcon}' class='browzine-article-link-icon' style='margin-bottom: -3px; margin-right: 4.5px;' aria-hidden='true' width='12' height='16'/> \" +\n      \"<span class='browzine-article-link-text'>{articleLinkText}</span> \" +\n      \"<md-icon md-svg-icon='primo-ui:open-in-new' class='md-primoExplore-theme' aria-hidden='true' style='height: 15px; width: 15px; min-height: 15px; min-width: 15px; margin-top: -2px;'><svg width='100%' height='100%' viewBox='0 0 24 24' y='504' xmlns='http://www.w3.org/2000/svg' fit='' preserveAspectRatio='xMidYMid meet' focusable='false'><path d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z'></path></svg></md-icon>\" +\n      \"</a>\" +\n      \"</div>\";\n\n    template = template.replace(/{articleLinkUrl}/g, articleLinkUrl);\n    template = template.replace(/{articleLinkText}/g, articleLinkText);\n    template = template.replace(/{linkIcon}/g, linkIcon);\n\n    return template;\n  }\n\n  function browzineWebLinkTemplate(scope, browzineWebLink) {\n    var browzineWebLinkText = \"\";\n    var bookIcon =\n      \"https://assets.thirdiron.com/images/integrations/browzine-open-book-icon.svg\";\n\n    if (isJournal(scope)) {\n      browzineWebLinkText =\n        browzine.journalBrowZineWebLinkText ||\n        browzine.primoJournalBrowZineWebLinkText ||\n        \"View Journal Contents\";\n    }\n\n    if (isArticle(scope)) {\n      browzineWebLinkText =\n        browzine.articleBrowZineWebLinkText ||\n        browzine.primoArticleBrowZineWebLinkText ||\n        \"View Issue Contents\";\n    }\n\n    var template =\n      \"<div class='browzine' style='line-height: 1.4em;'>\" +\n      \"<a class='browzine-web-link' href='{browzineWebLink}' target='_blank' onclick='browzine.primo.transition(event, this)'>\" +\n      \"<img alt='BrowZine Book Icon' src='{bookIcon}' class='browzine-book-icon' style='margin-bottom: -2px; margin-right: 2.5px;' aria-hidden='true' width='15' height='15'/> \" +\n      \"<span class='browzine-web-link-text'>{browzineWebLinkText}</span> \" +\n      \"<md-icon md-svg-icon='primo-ui:open-in-new' class='md-primoExplore-theme' aria-hidden='true' style='height: 15px; width: 15px; min-height: 15px; min-width: 15px; margin-top: -2px;'><svg width='100%' height='100%' viewBox='0 0 24 24' y='504' xmlns='http://www.w3.org/2000/svg' fit='' preserveAspectRatio='xMidYMid meet' focusable='false'><path d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z'></path></svg></md-icon>\" +\n      \"</a>\" +\n      \"</div>\";\n\n    template = template.replace(/{browzineWebLink}/g, browzineWebLink);\n    template = template.replace(/{browzineWebLinkText}/g, browzineWebLinkText);\n    template = template.replace(/{bookIcon}/g, bookIcon);\n\n    return template;\n  }\n\n  function unpaywallArticlePDFTemplate(directToPDFUrl) {\n    var pdfIcon =\n      \"https://assets.thirdiron.com/images/integrations/browzine-pdf-download-icon.svg\";\n    var articlePDFDownloadLinkText =\n      browzine.articlePDFDownloadViaUnpaywallText ||\n      \"Download PDF (via Unpaywall)\";\n\n    var template =\n      \"<div class='browzine' style='line-height: 1.4em; margin-right: 4.5em;'>\" +\n      \"<a class='unpaywall-article-pdf-link' href='{directToPDFUrl}' target='_blank' onclick='browzine.primo.transition(event, this)'>\" +\n      \"<img alt='BrowZine PDF Icon' src='{pdfIcon}' class='browzine-pdf-icon' style='margin-bottom: -3px; margin-right: 4.5px;' aria-hidden='true' width='12' height='16'/> \" +\n      \"<span class='browzine-web-link-text'>{articlePDFDownloadLinkText}</span> \" +\n      \"<md-icon md-svg-icon='primo-ui:open-in-new' class='md-primoExplore-theme' aria-hidden='true' style='height: 15px; width: 15px; min-height: 15px; min-width: 15px; margin-top: -2px;'><svg width='100%' height='100%' viewBox='0 0 24 24' y='504' xmlns='http://www.w3.org/2000/svg' fit='' preserveAspectRatio='xMidYMid meet' focusable='false'><path d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z'></path></svg></md-icon>\" +\n      \"</a>\" +\n      \"</div>\";\n\n    template = template.replace(/{directToPDFUrl}/g, directToPDFUrl);\n    template = template.replace(\n      /{articlePDFDownloadLinkText}/g,\n      articlePDFDownloadLinkText\n    );\n    template = template.replace(/{pdfIcon}/g, pdfIcon);\n\n    return template;\n  }\n\n  function unpaywallArticleLinkTemplate(articleLinkUrl) {\n    var linkIcon =\n      \"https://assets.thirdiron.com/images/integrations/browzine-article-link-icon.svg\";\n    var articleLinkText =\n      browzine.articleLinkViaUnpaywallText || \"Read Article (via Unpaywall)\";\n\n    var template =\n      \"<div class='browzine' style='line-height: 1.4em; margin-right: 4.5em;'>\" +\n      \"<a class='unpaywall-article-link' href='{articleLinkUrl}' target='_blank' onclick='browzine.primo.transition(event, this)'>\" +\n      \"<img alt='BrowZine Article Link Icon' src='{linkIcon}' class='browzine-article-link-icon' style='margin-bottom: -3px; margin-right: 4.5px;' aria-hidden='true' width='12' height='16'/> \" +\n      \"<span class='browzine-article-link-text'>{articleLinkText}</span> \" +\n      \"<md-icon md-svg-icon='primo-ui:open-in-new' class='md-primoExplore-theme' aria-hidden='true' style='height: 15px; width: 15px; min-height: 15px; min-width: 15px; margin-top: -2px;'><svg width='100%' height='100%' viewBox='0 0 24 24' y='504' xmlns='http://www.w3.org/2000/svg' fit='' preserveAspectRatio='xMidYMid meet' focusable='false'><path d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z'></path></svg></md-icon>\" +\n      \"</a>\" +\n      \"</div>\";\n\n    template = template.replace(/{articleLinkUrl}/g, articleLinkUrl);\n    template = template.replace(/{articleLinkText}/g, articleLinkText);\n    template = template.replace(/{linkIcon}/g, linkIcon);\n\n    return template;\n  }\n\n  function unpaywallManuscriptPDFTemplate(directToPDFUrl) {\n    var pdfIcon =\n      \"https://assets.thirdiron.com/images/integrations/browzine-pdf-download-icon.svg\";\n    var articlePDFDownloadLinkText =\n      browzine.articleAcceptedManuscriptPDFViaUnpaywallText ||\n      \"Download PDF (Accepted Manuscript via Unpaywall)\";\n\n    var template =\n      \"<div class='browzine' style='line-height: 1.4em; margin-right: 4.5em;'>\" +\n      \"<a class='unpaywall-manuscript-article-pdf-link' href='{directToPDFUrl}' target='_blank' onclick='browzine.primo.transition(event, this)'>\" +\n      \"<img alt='BrowZine PDF Icon' src='{pdfIcon}' class='browzine-pdf-icon' style='margin-bottom: -3px; margin-right: 4.5px;' aria-hidden='true' width='12' height='16'/> \" +\n      \"<span class='browzine-web-link-text'>{articlePDFDownloadLinkText}</span> \" +\n      \"<md-icon md-svg-icon='primo-ui:open-in-new' class='md-primoExplore-theme' aria-hidden='true' style='height: 15px; width: 15px; min-height: 15px; min-width: 15px; margin-top: -2px;'><svg width='100%' height='100%' viewBox='0 0 24 24' y='504' xmlns='http://www.w3.org/2000/svg' fit='' preserveAspectRatio='xMidYMid meet' focusable='false'><path d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z'></path></svg></md-icon>\" +\n      \"</a>\" +\n      \"</div>\";\n\n    template = template.replace(/{directToPDFUrl}/g, directToPDFUrl);\n    template = template.replace(\n      /{articlePDFDownloadLinkText}/g,\n      articlePDFDownloadLinkText\n    );\n    template = template.replace(/{pdfIcon}/g, pdfIcon);\n\n    return template;\n  }\n\n  function unpaywallManuscriptLinkTemplate(articleLinkUrl) {\n    var linkIcon =\n      \"https://assets.thirdiron.com/images/integrations/browzine-article-link-icon.svg\";\n    var articleLinkText =\n      browzine.articleAcceptedManuscriptArticleLinkViaUnpaywallText ||\n      \"Read Article (Accepted Manuscript via Unpaywall)\";\n\n    var template =\n      \"<div class='browzine' style='line-height: 1.4em; margin-right: 4.5em;'>\" +\n      \"<a class='unpaywall-manuscript-article-link' href='{articleLinkUrl}' target='_blank' onclick='browzine.primo.transition(event, this)'>\" +\n      \"<img alt='BrowZine Article Link Icon' src='{linkIcon}' class='browzine-article-link-icon' style='margin-bottom: -3px; margin-right: 4.5px;' aria-hidden='true' width='12' height='16'/> \" +\n      \"<span class='browzine-article-link-text'>{articleLinkText}</span> \" +\n      \"<md-icon md-svg-icon='primo-ui:open-in-new' class='md-primoExplore-theme' aria-hidden='true' style='height: 15px; width: 15px; min-height: 15px; min-width: 15px; margin-top: -2px;'><svg width='100%' height='100%' viewBox='0 0 24 24' y='504' xmlns='http://www.w3.org/2000/svg' fit='' preserveAspectRatio='xMidYMid meet' focusable='false'><path d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z'></path></svg></md-icon>\" +\n      \"</a>\" +\n      \"</div>\";\n\n    template = template.replace(/{articleLinkUrl}/g, articleLinkUrl);\n    template = template.replace(/{articleLinkText}/g, articleLinkText);\n    template = template.replace(/{linkIcon}/g, linkIcon);\n\n    return template;\n  }\n\n  function isUnpaywallEnabled() {\n    return (\n      browzine.articlePDFDownloadViaUnpaywallEnabled ||\n      browzine.articleLinkViaUnpaywallEnabled ||\n      browzine.articleAcceptedManuscriptPDFViaUnpaywallEnabled ||\n      browzine.articleAcceptedManuscriptArticleLinkViaUnpaywallEnabled\n    );\n  }\n\n  function getElement(scope) {\n    return scope.$element;\n  }\n\n  function getElementParent(element) {\n    return element[0].offsetParent || element[0];\n  }\n\n  function getScope($scope) {\n    return $scope && $scope.$ctrl && $scope.$ctrl.parentCtrl\n      ? $scope.$ctrl.parentCtrl\n      : undefined;\n  }\n\n  function shouldEnhance(scope) {\n    var validation = false;\n\n    if (!isFiltered(scope)) {\n      if (isJournal(scope) && getIssn(scope)) {\n        validation = true;\n      }\n\n      if (isArticle(scope) && getDoi(scope)) {\n        validation = true;\n      }\n\n      if (isArticle(scope) && !getDoi(scope) && getIssn(scope)) {\n        validation = true;\n      }\n    }\n\n    return validation;\n  }\n\n  function searchResult($scope) {\n    var scope = getScope($scope);\n\n    if (!shouldEnhance(scope)) {\n      return;\n    }\n\n    var endpoint = getEndpoint(scope);\n\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", endpoint, true);\n    request.setRequestHeader(\"Content-type\", \"application/json\");\n\n    request.onload = function () {\n      if (request.readyState == XMLHttpRequest.DONE && request.status == 200) {\n        var response = JSON.parse(request.response);\n\n        var data = getData(response);\n        var journal = getIncludedJournal(response);\n\n        var browzineWebLink = getBrowZineWebLink(data);\n        var coverImageUrl = getCoverImageUrl(scope, data, journal);\n        var browzineEnabled = getBrowZineEnabled(scope, data, journal);\n        var defaultCoverImage = isDefaultCoverImage(coverImageUrl);\n        var directToPDFUrl = getDirectToPDFUrl(scope, data);\n        var articleLinkUrl = getArticleLinkUrl(scope, data);\n\n        var element = getElement(scope);\n\n        if (\n          directToPDFUrl &&\n          isArticle(scope) &&\n          showDirectToPDFLink() &&\n          browzineEnabled\n        ) {\n          var template = directToPDFTemplate(directToPDFUrl);\n\n          (function poll() {\n            var elementParent = getElementParent(element);\n            var availabilityLine = elementParent.querySelector(\n              \"prm-search-result-availability-line .layout-align-start-start\"\n            );\n\n            if (availabilityLine) {\n              availabilityLine.insertAdjacentHTML(\"afterbegin\", template);\n            } else {\n              requestAnimationFrame(poll);\n            }\n          })();\n        }\n\n        if (\n          !directToPDFUrl &&\n          articleLinkUrl &&\n          isArticle(scope) &&\n          showDirectToPDFLink() &&\n          showArticleLink() &&\n          browzineEnabled\n        ) {\n          var template = articleLinkTemplate(articleLinkUrl);\n\n          (function poll() {\n            var elementParent = getElementParent(element);\n            var availabilityLine = elementParent.querySelector(\n              \"prm-search-result-availability-line .layout-align-start-start\"\n            );\n\n            if (availabilityLine) {\n              availabilityLine.insertAdjacentHTML(\"afterbegin\", template);\n            } else {\n              requestAnimationFrame(poll);\n            }\n          })();\n        }\n\n        if (\n          browzineWebLink &&\n          browzineEnabled &&\n          isJournal(scope) &&\n          showJournalBrowZineWebLinkText()\n        ) {\n          var template = browzineWebLinkTemplate(scope, browzineWebLink);\n          element.append(template);\n        }\n\n        if (\n          browzineWebLink &&\n          browzineEnabled &&\n          isArticle(scope) &&\n          (directToPDFUrl || articleLinkUrl) &&\n          showArticleBrowZineWebLinkText()\n        ) {\n          var template = browzineWebLinkTemplate(scope, browzineWebLink);\n          element.append(template);\n        }\n\n        if (coverImageUrl && !defaultCoverImage && showJournalCoverImages()) {\n          (function poll() {\n            var elementParent = getElementParent(element);\n            var coverImages = elementParent.querySelectorAll(\n              \"prm-search-result-thumbnail-container img\"\n            );\n\n            if (\n              coverImages &&\n              coverImages[0] &&\n              coverImages[0].className.indexOf(\"fan-img\") > -1\n            ) {\n              Array.prototype.forEach.call(coverImages, function (coverImage) {\n                coverImage.src = coverImageUrl;\n              });\n            } else {\n              requestAnimationFrame(poll);\n            }\n          })();\n        }\n      }\n\n      if (\n        (request.readyState == XMLHttpRequest.DONE && request.status == 404) ||\n        (isArticle(scope) && !directToPDFUrl && !articleLinkUrl)\n      ) {\n        var endpoint = getUnpaywallEndpoint(scope);\n\n        if (endpoint && isUnpaywallEnabled()) {\n          var requestUnpaywall = new XMLHttpRequest();\n          requestUnpaywall.open(\"GET\", endpoint, true);\n          requestUnpaywall.setRequestHeader(\"Content-type\", \"application/json\");\n\n          requestUnpaywall.onload = function () {\n            if (\n              requestUnpaywall.readyState == XMLHttpRequest.DONE &&\n              requestUnpaywall.status == 200\n            ) {\n              var response = JSON.parse(requestUnpaywall.response);\n\n              var unpaywallArticlePDFUrl = getUnpaywallArticlePDFUrl(response);\n              var unpaywallArticleLinkUrl = getUnpaywallArticleLinkUrl(\n                response\n              );\n              var unpaywallManuscriptArticlePDFUrl = getUnpaywallManuscriptArticlePDFUrl(\n                response\n              );\n              var unpaywallManuscriptArticleLinkUrl = getUnpaywallManuscriptArticleLinkUrl(\n                response\n              );\n\n              var template;\n\n              if (\n                unpaywallArticlePDFUrl &&\n                browzine.articlePDFDownloadViaUnpaywallEnabled\n              ) {\n                template = unpaywallArticlePDFTemplate(unpaywallArticlePDFUrl);\n              } else if (\n                unpaywallArticleLinkUrl &&\n                browzine.articleLinkViaUnpaywallEnabled\n              ) {\n                template = unpaywallArticleLinkTemplate(\n                  unpaywallArticleLinkUrl\n                );\n              } else if (\n                unpaywallManuscriptArticlePDFUrl &&\n                browzine.articleAcceptedManuscriptPDFViaUnpaywallEnabled\n              ) {\n                template = unpaywallManuscriptPDFTemplate(\n                  unpaywallManuscriptArticlePDFUrl\n                );\n              } else if (\n                unpaywallManuscriptArticleLinkUrl &&\n                browzine.articleAcceptedManuscriptArticleLinkViaUnpaywallEnabled\n              ) {\n                template = unpaywallManuscriptLinkTemplate(\n                  unpaywallManuscriptArticleLinkUrl\n                );\n              }\n\n              if (template) {\n                var element = getElement(scope);\n\n                (function poll() {\n                  var elementParent = getElementParent(element);\n                  var availabilityLine = elementParent.querySelector(\n                    \"prm-search-result-availability-line .layout-align-start-start\"\n                  );\n\n                  if (availabilityLine) {\n                    availabilityLine.insertAdjacentHTML(\"afterbegin\", template);\n                  } else {\n                    requestAnimationFrame(poll);\n                  }\n                })();\n              }\n            }\n          };\n\n          requestUnpaywall.send();\n        }\n      }\n    };\n\n    request.send();\n  }\n\n  return {\n    searchResult: searchResult,\n    urlRewrite: urlRewrite,\n    libraryIdOverride: libraryIdOverride,\n    getResult: getResult,\n    isArticle: isArticle,\n    isJournal: isJournal,\n    getIssn: getIssn,\n    getDoi: getDoi,\n    isFiltered: isFiltered,\n    getEndpoint: getEndpoint,\n    getUnpaywallEndpoint: getUnpaywallEndpoint,\n    shouldEnhance: shouldEnhance,\n    getData: getData,\n    getIncludedJournal: getIncludedJournal,\n    getBrowZineWebLink: getBrowZineWebLink,\n    getCoverImageUrl: getCoverImageUrl,\n    getBrowZineEnabled: getBrowZineEnabled,\n    isDefaultCoverImage: isDefaultCoverImage,\n    getDirectToPDFUrl: getDirectToPDFUrl,\n    getArticleLinkUrl: getArticleLinkUrl,\n    isUnknownVersion: isUnknownVersion,\n    isTrustedRepository: isTrustedRepository,\n    getUnpaywallArticlePDFUrl: getUnpaywallArticlePDFUrl,\n    getUnpaywallArticleLinkUrl: getUnpaywallArticleLinkUrl,\n    getUnpaywallManuscriptArticlePDFUrl: getUnpaywallManuscriptArticlePDFUrl,\n    getUnpaywallManuscriptArticleLinkUrl: getUnpaywallManuscriptArticleLinkUrl,\n    showJournalCoverImages: showJournalCoverImages,\n    showJournalBrowZineWebLinkText: showJournalBrowZineWebLinkText,\n    showArticleBrowZineWebLinkText: showArticleBrowZineWebLinkText,\n    showDirectToPDFLink: showDirectToPDFLink,\n    showArticleLink: showArticleLink,\n    showPrintRecords: showPrintRecords,\n    transition: transition,\n    directToPDFTemplate: directToPDFTemplate,\n    articleLinkTemplate: articleLinkTemplate,\n    browzineWebLinkTemplate: browzineWebLinkTemplate,\n    unpaywallArticlePDFTemplate: unpaywallArticlePDFTemplate,\n    unpaywallArticleLinkTemplate: unpaywallArticleLinkTemplate,\n    unpaywallManuscriptPDFTemplate: unpaywallManuscriptPDFTemplate,\n    unpaywallManuscriptLinkTemplate: unpaywallManuscriptLinkTemplate,\n    isUnpaywallEnabled: isUnpaywallEnabled,\n    getElement: getElement,\n    getElementParent: getElementParent,\n    getScope: getScope,\n  };\n};\n","const browzinePrimoAdapter = require(\"./browzine-primo-adapter\");\n\nfunction appendJournalsCard() {\n  var new_card = document.createElement(\"md-card\");\n\n  new_card.className = \"default-card\";\n  new_card.innerHTML = `\n  <md-card-title>\n    <md-card-title-text>\n      <span class=\"md-headline\">Browzine</span>\n    </md-card-title-text>\n  </md-card-title>\n  <md-card-content>\n    <p><a href=\"https://browzine.com/libraries/81\">Browzine</a> lets you flip through and read UIC Library-subscribed Journals, equivalent to browsing through physical Library stacks.</p>\n  </md-card-content>\n  <md-card-footer layout=\"row\" style=\"text-align: right\">\n    <a class=\"uic_button md-button md-accent md-raised\" href=\"https://browzine.com/libraries/81\">Visit Browzine</a></a>\n  </md-card-footer>`;\n\n  function placeCard() {\n    const existing_card = document.querySelectorAll(\"md-card\")[0];\n    if (window.location.href.match(\"jsearch\")) {\n      if (existing_card) {\n        existing_card.parentElement.append(new_card);\n      }\n    }\n  }\n\n  // initial appearance on direct load\n  const observer = new MutationObserver(function (mutations, me) {\n    const existing_card = document.querySelectorAll(\"md-card\")[0];\n    if (existing_card) {\n      placeCard();\n      me.disconnect(); // stop observing\n    }\n  });\n\n  // subsequent appearances after navigation\n  let loc = window.location.href;\n  setInterval(function () {\n    if (loc != window.location.href) {\n      placeCard();\n      loc = window.location.href;\n    }\n  }, 100); // check every 100ms\n\n  observer.observe(document, {\n    childList: true,\n    subtree: true,\n  });\n}\n\n/**\n * adapted from https://thirdiron.atlassian.net/wiki/spaces/BrowZineAPIDocs/pages/79200260/Ex+Libris+Primo+Integration\n */\nfunction primoIntegration(app) {\n  // Load BrowZine Adapter\n  const browzine = {\n    libraryId: \"81\",\n    apiKey: \"f126de2d-8846-4a37-b6f9-069c6e057c08\",\n  };\n\n  console.log(\" * * * \");\n\n  const adapter = browzinePrimoAdapter(browzine);\n\n  app.controller(\"prmSearchResultAvailabilityLineAfterController\", function (\n    scope\n  ) {\n\n  });\n\n  app.component(\"prmSearchResultAvailabilityLineAfter\", {\n    bindings: { parentCtrl: \"<\" },\n    controller: \"prmSearchResultAvailabilityLineAfterController\",\n  });\n\n  \n  console.log(\" * * * \");\n}\n\nmodule.exports = {\n  appendJournalsCard,\n  primoIntegration,\n};\n\n// libraryId: \"81\",\n// apiKey: \"f126de2d-8846-4a37-b6f9-069c6e057c08\",\n","function init() {\n  const chatID = \"325a3faf25b8f6445806d60e21bcc210\";\n  const chat_element = document.createElement(\"div\");\n  const protocol = document.location.protocol ? \"https://\" : \"http://\";\n  const chat_script = document.createElement(\"script\");\n\n  document.body.appendChild(chat_element);\n  chat_element.setAttribute(\"id\", `libchat_${chatID}`);\n  chat_script.setAttribute(\"type\", \"text/javascript\");\n  chat_script.setAttribute(\"async\", \"true\");\n  chat_script.setAttribute(\n    \"src\",\n    `${protocol}v2.libanswers.com/load_chat.php?hash=${chatID}`\n  );\n  document.body.appendChild(chat_script);\n}\n\nmodule.exports = {\n  init\n};\n","/**\n * Remove \"target\" attributes in Main Menu anchor links\n * forcing pages to load in current tab\n */\nfunction removeTargetAttrs() {\n  const targetNode = document.getElementById(\"some-id\");\n\n  function remove() {\n    const menulinks = document.querySelectorAll(\"prm-main-menu a\");\n    if (menulinks) {\n      menulinks.forEach((link) => {\n        // kill all \"target\" attributes in the main menu\n        link.removeAttribute(\"target\");\n\n        // remove now-false Aria label\n        const attr = \"aria-label\";\n        const match = \", opens in a new window\";\n        if (link.getAttribute(attr) && link.getAttribute(attr).match(match)) {\n          link.setAttribute(attr, link.getAttribute(attr).replace(match, \"\"));\n        }\n      });\n    }\n  }\n\n  remove();\n  const observer = new MutationObserver(function (mutations, me) {\n    remove();\n  });\n\n  observer.observe(document, {\n    attributes: true,\n    childList: true,\n    subtree: true,\n  });\n}\n\nmodule.exports = {\n  removeTargetAttrs\n};\n","function init() {\n  var a = document.querySelector(\"head\");\n  var css1 = document.createElement(\"link\");\n\n  css1.type = \"text/css\";\n  css1.rel = \"Stylesheet\";\n  css1.href =\n    \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\";\n  css1.crossorigin = \"anonymous\";\n  a.appendChild(css1);\n\n  var css2 = document.createElement(\"link\");\n  css2.type = \"text/css\";\n  css2.rel = \"Stylesheet\";\n  css2.href =\n    \"https://www.stackmapintegration.com/uic-primove/StackMap.min.css\";\n  a.appendChild(css2);\n\n  var w = document.createElement(\"script\");\n  w.type = \"text/javascript\";\n  w.async = true;\n  w.src = \"https://www.stackmapintegration.com/uic-primove/StackMap.min.js\";\n  var b = document.body;\n  b.appendChild(w);\n}\n\nmodule.exports = {\n  init\n};\n"]}